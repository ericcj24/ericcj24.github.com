<!DOCTYPE html>
<html lang="en">
<head>
  <title>Jian Chen - Home </title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <meta name="verify-v1" content="fI45uNHehVNiO9Dt0Fp7XnsV0Z/ozBTkPoS6RlYAe50=" />
  <meta name="y_key" content="6c948e75a617b12d" />
  <meta name='technorati-claim' content='8QN7CWNH8BSJ' />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" media="screen" href="/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/css/default.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Jian's blog" />
</head>

<body class='blog'>
  <div class="container">
    <div class="row">
      <div class="span4 sidebar affix">
        <div class="well">
          <h2 class='site-title'>
            <a href="http://ericcj24.github.io">Jian Chen</a>
          </h2>

          <p>warp speed 9.9 !</p>

          <ul id="navigation" class="clearfix">
            <li class='about'><a href='/about/'>About</a></li>
            <li class="resume"><a href="/Resume_JianChen_2014_3C.pdf" rel="me" class="url">resume</a></li>
            <li class='archives'><a href='/archives/'>Archives</a></li>
            <li class="github"><a href="http://github.com/ericcj24" rel='me' class='url'>@github</a></li>
            <!--<li class="acknowledgement"><a href="/acknowledgment/">acknowledgment</a></li>-->
          </ul>
        </div>
      </div>
      <div class="span8 main offset4">
        <div class="well">
          <div id='index'>

  <div class="post">
    <h2><a href="/2013/07/05/karaoke-game-android-app/">Karaoke Game on Android</a></h2>

    <p style="text-align:center;"><img src="/images/posts/2013-07-05/Screenshot_2013-07-05-20-19-13.png" style="max-width:50%;" alt="" /><br />
<p align="center">welcome page</p></p>
<p style="text-align:center;"><img src="/images/posts/2013-07-05/Screenshot_2013-07-05-20-19-34.png" style="max-width:50%;" alt="" /><br />
<p align="center">gaming page</p></p>
<p style="text-align:center;"><img src="/images/posts/2013-07-05/Screenshot_2013-07-05-20-32-27.png" style="max-width:50%;" alt="" /><br />
<p align="center">end of the game page</p></p>
<h3>Overview</h3>
<p>This application is an extension to the original spectrogram application. When people are singing to the microphone, the application calculating the autocorrelation of the sound recorded, it finds the pitch in his voice and compare it to the reference. The reference would be a recording of the piano play of the same song (piano would generate accurate pitch, thus this file, which recored and processed with <span class="caps">MATLAB</span>, could be serve as reference). Every matching between human voice and the reference pitch would gain one point, at the end of the song, a total score would be displayed.<br />
Some key concept may be useful during the signal processing part are: <a href="https://en.wikipedia.org/wiki/Autocorrelation">autocorrelation</a> , <a href="http://en.wikipedia.org/wiki/Voice_activity_detection">voice detection</a></p>
<h3><span class="caps">MATLAB</span> simulation</h3>
<p><span class="caps">MATLAB</span> main function call</p>
<div class="highlight"><pre><code class="matlab"><span class="n">numdatablc</span> <span class="p">=</span> <span class="nb">size</span><span class="p">(</span><span class="n">a4</span><span class="p">)</span><span class="o">/</span><span class="mi">256</span><span class="p">;</span> <span class="c">% number of data blocks, each block has 256 points, store in variable a4</span>
<span class="n">pdata1</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">numdatablc</span><span class="p">);</span> <span class="c">% initialize return array</span>
<span class="k">for</span> <span class="nb">i</span><span class="p">=</span><span class="mi">0</span><span class="p">:</span><span class="n">numdatablc</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">temp</span> <span class="p">=</span> <span class="n">a4</span><span class="p">(</span><span class="nb">i</span><span class="o">*</span><span class="mi">256</span><span class="o">+</span><span class="mi">1</span><span class="p">:(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">256</span><span class="p">);</span>
    <span class="k">if</span> <span class="n">voidet</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="c">% do voice detection</span>
        <span class="n">pdata1</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="n">proc</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="n">f</span><span class="p">);</span> <span class="c">% do autocorrelation</span>
    <span class="k">else</span>
        <span class="n">pdata1</span><span class="p">(</span><span class="nb">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><p><span class="caps">MATLAB</span> function for autocorrelation and pitch finding</p>
<div class="highlight"><pre><code class="matlab"><span class="k">function</span><span class="w"> </span>[ y ] <span class="p">=</span><span class="w"> </span><span class="nf">proc</span><span class="p">(</span> x,f <span class="p">)</span><span class="w"></span>
<span class="c">% f: sampling frequency</span>
<span class="c">% filter</span>
<span class="c">% f_pi/pi = f/4Khz</span>
<span class="c">% f_pi = 2pi/range</span>
<span class="c">% range = 8KHz/f = indx_max - indx_sec_max</span>
<span class="c">% human vocal range: 75 ~ 500 Hz</span>
<span class="c">% range: 8000/500 ~ 8000/75 =&gt; floor 16 ~ 107</span>
<span class="n">lowr</span> <span class="p">=</span> <span class="nb">floor</span><span class="p">(</span><span class="n">f</span><span class="o">/</span><span class="mi">500</span><span class="p">);</span> 
<span class="n">upr</span> <span class="p">=</span> <span class="nb">ceil</span><span class="p">(</span><span class="n">f</span><span class="o">/</span><span class="mi">75</span><span class="p">);</span>
<span class="n">x_cor</span> <span class="p">=</span> <span class="n">xcorr</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="n">x_filt</span> <span class="p">=</span> <span class="n">x_cor</span><span class="p">;</span>
<span class="p">[</span><span class="n">xmax</span><span class="p">,</span> <span class="n">po</span><span class="p">]</span> <span class="p">=</span> <span class="n">max</span><span class="p">(</span><span class="n">x_filt</span><span class="p">);</span>
<span class="n">x_filt</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">lowr</span><span class="o">+</span><span class="n">po</span><span class="p">)</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">x_filt</span><span class="p">(</span><span class="n">po</span><span class="o">+</span><span class="n">upr</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="k">end</span><span class="p">)</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">[</span><span class="n">xmax1</span><span class="p">,</span><span class="n">pmax</span><span class="p">]</span> <span class="p">=</span> <span class="n">max</span><span class="p">(</span><span class="n">x_filt</span><span class="p">);</span>
<span class="n">y</span> <span class="p">=</span> <span class="n">f</span><span class="o">/</span><span class="p">(</span><span class="n">pmax</span><span class="o">-</span><span class="n">po</span><span class="p">);</span>
<span class="k">end</span>
</code></pre></div><p><span class="caps">MATLAB</span> function for voice detection</p>
<div class="highlight"><pre><code class="matlab"><span class="k">function</span><span class="w"> </span>[ y ] <span class="p">=</span><span class="w"> </span><span class="nf">voidet</span><span class="p">(</span>x<span class="p">)</span><span class="w"></span>
<span class="n">x2</span> <span class="p">=</span> <span class="n">x</span><span class="o">.^</span><span class="mi">2</span><span class="p">;</span>
<span class="n">xs</span> <span class="p">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">x2</span><span class="p">);</span>
<span class="k">if</span> <span class="n">xs</span> <span class="o">&gt;</span> <span class="mi">50000000</span> <span class="c">%2.56</span>
    <span class="n">y</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">else</span>
    <span class="n">y</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">end</span>
<span class="k">end</span>
</code></pre></div><p style="text-align:center;"><img src="/images/posts/2013-07-05/piano_test.jpg" style="max-width:50%;" alt="" /><br />
<p align="center">showing the calculated pitch from piano recording</p></p>
<p style="text-align:center;"><img src="/images/posts/2013-07-05/song_processed.jpg" style="max-width:50%;" alt="" /><br />
<p align="center">alphabet song recording processed (show pitch vs. data-time), the middle simulation has been manually corrected to be more smooth to serve as reference file</p></p>
<h3>Android app development</h3>
<p style="text-align:center;"><img src="/images/posts/2013-07-05/flowchart.jpg" style="max-width:50%;" alt="" /></p>
<p>During the song playing, lyrics would scrolling though the screen, real-time calculated pitch and score displayed on the screen, and real-time spectrogram would be scrolling through the right part of the screen with the pitch (the fundamental frequency of a human voice, usually the lowest frequency among all the harmonics) mapped out on the screen in red.</p>
<p>This is really a funny project that combines signal processing theory with practical gaming experience.</p>
<p>This is the free choice of the final project of the Embedded Digital Signal Processing (<span class="caps">DSP</span>) lab, the source code of the project could be found <a href="https://github.com/ericcj24/Karaoke-Game-Android-App">here</a></p>

    <small class="meta">July 05, 2013 | <a href='/2013/07/05/karaoke-game-android-app/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/2013/07/04/wildfire-monitor-system/">Wildfire Monitor System: a project proposal</a></h2>

    <p>Every year we watched from the news about wildfire in western part of the US. It costed lots of money and human resource to fight those vicious natural disaster. After watching the news that 19 firefighters had died during a recent wildfire in Arizona, I started to think about how we could approach this problem from a technology angle.</p>
<p>Following graph shows the implementation of my solution to wildfire prevention and monitoring:</p>
<p style="text-align:center;"><img src="/images/posts/2013-07-04/Slide3.jpg" style="max-width:50%;" alt="" /></p>
<h3>Design Overview</h3>
<p>My design includes two major modules: the ground computer hub and the <span class="caps">UAV</span> monitor unit.<br />
The <span class="caps">UAV</span> unit equips with:</p>
<ul>
	<li>heat sensor</li>
	<li><span class="caps">GPS</span> chip</li>
	<li>microprocessor</li>
	<li>RF transmitter</li>
	<li>High resolution camera</li>
</ul>
<p>Computer hub features:</p>
<ul>
	<li>RF receiver</li>
	<li>Human monitoring in front of computer</li>
	<li>Google Map <span class="caps">API</span> to help map out the ground of wildfire</li>
</ul>
<h3>Implementation of the project</h3>
<p>The project would be implemented to each local forestry administration. Each location would have one ground unit, and one <span class="caps">UAV</span> in charge of sweeping a certain area.<br />
At the beginning stage, <span class="caps">UAV</span> would proceed a preliminary sweep to map-out heat-spots from human habitation, and non-threaten source, the data from the first sweep would be processed with Google Map <span class="caps">API</span> to make a reference map. <br />
Future routinely sweep data would be compared to this reference map on the fly. If a new heat-spot occurs, the <span class="caps">UAV</span> would take a picture of the scene and send the picture together with the <span class="caps">GPS</span> coordinates back the base station. <br />
In base station, human worker would investigate the picture, assess the situation and make further decision on either to send out firefighter-jets to put out the fire.</p>
<h3>Some interesting challenges may occur</h3>
<ul>
	<li>how to make more fuel-efficiency UAVs (solar panel, battery)</li>
	<li>design low energy consume <span class="caps">GPS</span> circuit &amp; microprocessor</li>
	<li>most market existed <span class="caps">GPS</span> module output standard <span class="caps">NMEA</span> string, convert(A/D) and decipher this information into <span class="caps">GPS</span> coordinates</li>
	<li>design reliable RF communication between <span class="caps">UAV</span> and base</li>
	<li>implement Google Map <span class="caps">API</span></li>
</ul>

    <small class="meta">July 04, 2013 | <a href='/2013/07/04/wildfire-monitor-system/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/2013/07/03/spectrugram-android-app/">Spectrogram on Android</a></h2>

    <p>A spectrogram could display several qualities of sound in a graphical way. It could map out the frequency of the sound component, color-code its intensity at each frequency.</p>
<p>As part of my Embedded <span class="caps">DSP</span> lab, we built this spectrogram program on Android platform. It records the sound, use <a href="http://developer.android.com/tools/sdk/ndk/index.html">Android <span class="caps">NDK</span> package</a> to embed C code into Android program to process the sound with Fourier Transform and outputs its spectrogram.</p>
<p style="text-align:center;"><img src="/images/posts/2013-07-03/spectrogram.png" style="max-width:50%;" alt="" /><br />
<p align="center">pic 1</p></p>
<p>pic 1 shows the spectrogram of human voice, with different harmonics and intensity at each harmonic</p>
<p>The program&#8217;s sampling frequency is set at 8000Hz, thus it could detect highest frequency of 4000Hz without aliasing.</p>
<p>This is part of the Embedded Digital Signal Processing (<span class="caps">DSP</span>) lab, the code of this program could be found <a href="https://github.com/ericcj24/Spectrogram-DSP-Android-App">here</a></p>

    <small class="meta">July 03, 2013 | <a href='/2013/07/03/spectrugram-android-app/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/2013/07/03/image-processing-android-app/">Image Processing on Android</a></h2>

    <p>This image processing app features <a href="http://en.wikipedia.org/wiki/Histogram">histogram</a> and <span class="caps">RGB</span> coloring.</p>
<p>The application&#8217;s main frame is developed on Android Eclipse platform (Android <span class="caps">SDK</span>), I also used a <span class="caps">NDK</span> package to embed C++ code in <span class="caps">JAVA</span> to do the image processing part.The program has a <a href="http://opencv.org/">OpenCV</a> dependency, as the program calls some computer vision class from the OpenCV library.The successful install and run the program on Android device, a <a href="https://play.google.com/store/apps/details?id=org.opencv.engine&amp;hl=en">OpenCV Manager</a> from Google Play is also needed.</p>
<p style="text-align:center;"><img src="/images/posts/2013-07-03/rgb_color.png" style="max-width:50%;" alt="" /></p>
<p align="center">pic 1</p>
<p>This screenshot (pic 1) shows the app with the <span class="caps">RGB</span> color option chosen</p>
<p style="text-align:center;"><img src="/images/posts/2013-07-03/histogram.png" style="max-width:50%;" alt="" /><br />
<p align="center">pic 2</p><br />
This screenshot (pic 2) shows the app with the histogram option chosen, as left half of the image has a clearer detail of the object in the far distance</p>
<p>This project is part of the Embedded Digital Signal Processing (<span class="caps">DSP</span>) class, the code could be found <a href="https://github.com/ericcj24/Image-Processing-Android-App">here</a> .</p>

    <small class="meta">July 03, 2013 | <a href='/2013/07/03/image-processing-android-app/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/2013/07/02/hello-world/">Hello World</a></h2>

    <p style="text-align:center;"><img src="/images/posts/2013-07-03/JessevanDijk.jpg" style="max-width:80%;" alt="" /></p>
<p>Hello World</p>
<p>(photo courtesy of <a href="http://jessevandijkart.com/">Jesse van Dijk</a> )</p>

    <small class="meta">July 02, 2013 | <a href='/2013/07/02/hello-world/#disqus_thread'>View Comments</a></small>
  </div>

  <div class="post">
    <h2><a href="/2013/01/01/shade/">Shade</a></h2>

    <p style="text-align:center;"><img src="/images/posts/2013-07-30/gates_title.jpg" style="max-width:80%;" alt="" /><br />
<p align="center">photo courtesy: Mary Altaffer/Associated Press</p></p>
<p>When it comes to travel with your family in the park on a sunny Sunday, people always come to appreciate that shaded area under the tree, or beside the building.</p>
<p>Art Duo <a href="https://en.wikipedia.org/wiki/Christo_and_Jeanne-Claude">Christo and Jeanne-Claude</a> who are famous for their international series of large-sale outdoor installations. They used to took years to gain their permission to put their installations in central park.I admire their artistic spirit and appreciate their wonderful effort to bring inspirations to urban life.</p>
<p>They first proposed the project in 1979, but it was not approved until 2005.</p>
<p><a href="http://www.christojeanneclaude.net/projects/the-gates?images=completed#.Ud7zaD7TVcQ">The Gates</a>, project for central park, New York City, 2005<br />
Also on <a href="https://en.wikipedia.org/wiki/Christo_and_Jeanne-Claude#The_Gates">wikipedia</a> and <a href="http://www.nytimes.com/ref/arts/design/GATES-REF.html">New York Times</a></p>
<p>Technology should also create a better living environment and inspire creativity.</p>

    <small class="meta">January 01, 2013 | <a href='/2013/01/01/shade/#disqus_thread'>View Comments</a></small>
  </div>

</div>

<div class='paging'>
  

  
    <a href='/' class='newer'>Newer Posts</a>
  

  
  <div class='clear'></div>
</div>

        </div>
      </div>

      <div id="bottom" class="span8 offset4">
        <div class="well">
          <a href="/about/">About</a> |
          <a href="/archives/">Archives</a> |
          <a href="/acknowledgment/">Courtesy</a> |
          <a href="/atom.xml">feed</a>
        </div>
      </div>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="/javascripts/bootstrap.min.js"></script>

  <!-- Google Analytics Code 
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-9947336-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
          'http://www') + '.google-analytics.com/ga.js';
      ga.setAttribute('async', 'true');
      document.documentElement.firstChild.appendChild(ga);
    })();

  </script>  -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-42183274-1', 'ericcj24.github.io');
        ga('send', 'pageview');
        
    </script>
    
</body>
</html>

